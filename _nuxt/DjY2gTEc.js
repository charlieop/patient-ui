import{_ as q,i as _,aa as D,q as s,o as F,c as E,ab as n,f as S,v as C,a,y as u,b as P,u as t,x as c,F as U,ae as V,S as A,af as G,k as H,ad as J,t as K}from"./BK4hmxeT.js";import{_ as O}from"./BbM5FZ3f.js";import{u as Q}from"./i7aB6PBj.js";const W={key:0,class:"loading-overlay"},X={class:"loader-spin"},Y={class:"error"},Z={__name:"NewConversationForm",setup(T){const l=_(null),{saveFormData:f,loadFormData:b,clearFormData:h}=V(),{sendForm:$}=Q(),y=D(),o=_(!1),i=_(!1);function p(){f(l.value.data)}function v(){const e=b();e&&l.value.load(e)}async function g(){if(o.value=!0,!await $(l.value.data)){i.value=!0;return}o.value=!1,h(),l.value.reset(),y.push("/chat")}return(e,r)=>{const k=s("FormStep"),N=s("FormSteps"),m=s("StaticElement"),B=s("CheckboxElement"),d=s("RadiogroupElement"),L=s("TextElement"),w=s("TextareaElement"),M=s("TagsElement"),j=s("SliderElement"),z=s("FormElements"),I=s("FormStepsControls"),R=s("Vueform");return F(),E(U,null,[n(o)?(F(),E("div",W,[S(a("div",X,null,512),[[C,!n(i)]]),S(a("p",Y,r[0]||(r[0]=[u(" 很抱歉, 出现了一个错误"),a("br",null,null,-1),u("请稍后重试"),a("br",null,null,-1),a("br",null,null,-1),u(" Sorry, an error occured"),a("br",null,null,-1),u("Please retry later ")]),512),[[C,n(i)]])])):P("",!0),t(R,{endpoint:!1,"validate-on":"step|change","add-class":"vf-new-conversation-form",ref_key:"form$",ref:l,onSubmit:g,onMounted:v,onChange:p},{empty:c(()=>[t(N,null,{default:c(()=>[t(k,{name:"page0",elements:["h1","p","divider","user-agreement"],label:e.$t("new.step1.name")},null,8,["label"]),t(k,{name:"page1",label:e.$t("new.step2.name"),elements:["gender","age","if-allergies","allergies","if-medical-histories","medical-histories","if-family-histories","family-histories","divider_2"]},null,8,["label"]),t(k,{name:"page2",elements:["symptom-keywords","symptom-text","duration","divider_1"],label:e.$t("new.step3.name")},null,8,["label"])]),_:1}),t(z,null,{default:c(()=>[t(m,{name:"h1",tag:"h1",content:e.$t("new.step1.title")},null,8,["content"]),t(m,{name:"p",tag:"blockquote",content:e.$t("new.step1.text")},null,8,["content"]),t(m,{name:"divider",tag:"hr",bottom:"1",top:"1"}),t(B,{name:"user-agreement",align:"left",text:e.$t("new.step1.terms"),rules:["accepted"],size:"sm"},null,8,["text"]),t(d,{name:"gender",view:"tabs",items:[{value:"M",label:e.$t("new.step2.male")},{value:"F",label:e.$t("new.step2.female")}],label:e.$t("new.step2.gender"),rules:["required"]},null,8,["items","label"]),t(L,{name:"age","input-type":"number",rules:["required","min:1","max:100","integer"],autocomplete:"off",label:e.$t("new.step2.age")},null,8,["label"]),t(d,{name:"if-allergies",view:"blocks",items:[{value:!0,label:e.$t("new.step2.confirm-allergies")},{value:!1,label:e.$t("new.step2.deny-allergies")}],label:e.$t("new.step2.if-allergies"),rules:["required"]},null,8,["items","label"]),t(w,{name:"allergies",label:e.$t("new.step2.allergies"),rows:3,rules:["required"],conditions:[["if-allergies","in",[!0]]]},null,8,["label"]),t(d,{name:"if-medical-histories",view:"blocks",items:[{value:!0,label:e.$t("new.step2.confirm-medical-histories")},{value:!1,label:e.$t("new.step2.deny-medical-histories")}],label:e.$t("new.step2.if-medical-histories"),rules:["required"]},null,8,["items","label"]),t(w,{name:"medical-histories",label:e.$t("new.step2.medical-histories"),rows:3,rules:["required"],conditions:[["if-medical-histories","in",[!0]]]},null,8,["label"]),t(d,{name:"if-family-histories",view:"blocks",items:[{value:!0,label:e.$t("new.step2.confirm-family-histories")},{value:!1,label:e.$t("new.step2.deny-family-histories")}],label:e.$t("new.step2.if-family-histories"),rules:["required"]},null,8,["items","label"]),t(w,{name:"family-histories",label:e.$t("new.step2.family-histories"),rows:3,rules:["required"],conditions:[["if-family-histories","in",[!0]]]},null,8,["label"]),t(m,{name:"divider_2",tag:"hr",top:"1",bottom:"1"}),t(M,{name:"symptom-keywords","close-on-select":!1,search:!1,items:[{value:e.$t("new.step3.keywords.fever"),label:e.$t("new.step3.keywords.fever")},{value:e.$t("new.step3.keywords.cough"),label:e.$t("new.step3.keywords.cough")},{value:e.$t("new.step3.keywords.sore-throat"),label:e.$t("new.step3.keywords.sore-throat")},{value:e.$t("new.step3.keywords.headache"),label:e.$t("new.step3.keywords.headache")},{value:e.$t("new.step3.keywords.diarrhea"),label:e.$t("new.step3.keywords.diarrhea")},{value:e.$t("new.step3.keywords.constipation"),label:e.$t("new.step3.keywords.constipation")},{value:e.$t("new.step3.keywords.nausea"),label:e.$t("new.step3.keywords.nausea")},{value:e.$t("new.step3.keywords.shortness-of-breath"),label:e.$t("new.step3.keywords.shortness-of-breath")},{value:e.$t("new.step3.keywords.joint-pain"),label:e.$t("new.step3.keywords.joint-pain")},{value:e.$t("new.step3.keywords.neck-or-back-pain"),label:e.$t("new.step3.keywords.neck-or-back-pain")},{value:e.$t("new.step3.keywords.swelling"),label:e.$t("new.step3.keywords.swelling")},{value:e.$t("new.step3.keywords.stiffness"),label:e.$t("new.step3.keywords.stiffness")},{value:e.$t("new.step3.keywords.muscle-weakness"),label:e.$t("new.step3.keywords.muscle-weakness")},{value:e.$t("new.step3.keywords.numbness"),label:e.$t("new.step3.keywords.numbness")}],label:e.$t("new.step3.symptoms"),"input-type":"search",autocomplete:"off",strict:!1,truncate:!1},null,8,["items","label"]),t(w,{name:"symptom-text",label:e.$t("new.step3.symptom-text"),rules:["required","max:300"],rows:5,placeholder:e.$t("new.step3.symptom-placeholder"),floating:!1},null,8,["label","placeholder"]),t(j,{name:"duration",label:e.$t("new.step3.duration"),min:0,max:30,default:3,"tooltip-position":"bottom",description:e.$t("new.step3.duration-info")},null,8,["label","description"]),t(m,{name:"divider_1",tag:"hr",top:"2",bottom:"1"})]),_:1}),t(I)]),_:1},512)],64)}}},x=q(Z,[["__scopeId","data-v-b52e6160"]]),ee={class:"form-wrapper"},te={class:"button-group"},se={__name:"new",setup(T){const{clearFormData:l,isSessionExpired:f,getLang:b,setLang:h}=V(),$=A("$vueform"),{setLocale:y}=G(),o=D();return H(()=>{f()||o.push("/chat")}),(i,p)=>{const v=J,g=O,e=x;return F(),E("div",ee,[a("div",te,[t(v,{size:"md",color:"red",variant:"outline",onClick:p[0]||(p[0]=()=>{n(l)(),n(o).push("/")})},{default:c(()=>[u(K(i.$t("new.back")),1)]),_:1}),t(g,{class:"select",name:"language",options:[{name:"chinese",value:"zh",display:"中文"},{name:"english",value:"en",display:"Eng"}],initValue:n(b)(),onChange:r=>{n(h)(r),n($).i18n.locale=r,n(y)(r)}},null,8,["initValue","onChange"])]),t(e)])}}},oe=q(se,[["__scopeId","data-v-b7e03b61"]]);export{oe as default};
