import{_ as q,i as k,aa as D,q as n,o as F,c as E,ab as a,f as S,v as C,a as s,y as u,b as P,u as t,x as d,F as U,ae as V,S as A,af as G,k as H,ad as J,t as K}from"./D8-mza0N.js";import{_ as O}from"./B856PIGq.js";import{u as Q}from"./DayAHsh7.js";const W={key:0,class:"loading-overlay"},X={class:"loader-spin"},Y={class:"error"},Z={__name:"NewConversationForm",setup(T){const l=k(null),{saveFormData:c,loadFormData:b,clearFormData:f}=V(),{sendForm:w}=Q(),v=D(),o=k(!1),i=k(!1);function p(){c(l.value.data)}function h(){const e=b();e&&l.value.load(e)}async function g(){if(o.value=!0,!await w(l.value.data)){i.value=!0;return}o.value=!1,f(),l.value.reset(),v.push("/chat")}return(e,r)=>{const $=n("FormStep"),N=n("FormSteps"),m=n("StaticElement"),B=n("CheckboxElement"),_=n("RadiogroupElement"),L=n("TextElement"),y=n("TextareaElement"),M=n("TagsElement"),j=n("SliderElement"),z=n("FormElements"),I=n("FormStepsControls"),R=n("Vueform");return F(),E(U,null,[a(o)?(F(),E("div",W,[S(s("div",X,null,512),[[C,!a(i)]]),S(s("p",Y,r[0]||(r[0]=[u(" 很抱歉, 出现了一个错误"),s("br",null,null,-1),u("请稍后重试"),s("br",null,null,-1),s("br",null,null,-1),u(" Sorry, an error occured"),s("br",null,null,-1),u("Please retry later ")]),512),[[C,a(i)]])])):P("",!0),t(R,{endpoint:!1,"validate-on":"step|change","add-class":"vf-new-conversation-form",ref_key:"form$",ref:l,onSubmit:g,onMounted:h,onChange:p},{empty:d(()=>[t(N,null,{default:d(()=>[t($,{name:"page0",elements:["h1","p","divider","user-agreement"],label:e.$t("new.step1.name")},null,8,["label"]),t($,{name:"page1",label:e.$t("new.step2.name"),elements:["gender","age","if-allergies","allergies","if-medical-histories","medical-histories","divider_2"]},null,8,["label"]),t($,{name:"page2",elements:["symptom-keywords","symptom-text","duration","divider_1"],label:e.$t("new.step3.name")},null,8,["label"])]),_:1}),t(z,null,{default:d(()=>[t(m,{name:"h1",tag:"h1",content:e.$t("new.step1.title")},null,8,["content"]),t(m,{name:"p",tag:"blockquote",content:e.$t("new.step1.text")},null,8,["content"]),t(m,{name:"divider",tag:"hr",bottom:"1",top:"1"}),t(B,{name:"user-agreement",align:"left",text:e.$t("new.step1.terms"),rules:["accepted"],size:"sm",submit:!1},null,8,["text"]),t(_,{name:"gender",view:"tabs",items:[{value:"M",label:e.$t("new.step2.male")},{value:"F",label:e.$t("new.step2.female")}],label:e.$t("new.step2.gender"),rules:["required"]},null,8,["items","label"]),t(L,{name:"age","input-type":"number",rules:["required","min:1","max:100","integer"],autocomplete:"off",label:e.$t("new.step2.age")},null,8,["label"]),t(_,{name:"if-allergies",view:"blocks",items:[{value:!0,label:e.$t("new.step2.confirm-allergies")},{value:!1,label:e.$t("new.step2.deny-allergies")}],label:e.$t("new.step2.if-allergies"),rules:["required"],submit:!1},null,8,["items","label"]),t(y,{name:"allergies",label:e.$t("new.step2.allergies"),rows:3,rules:["required"],conditions:[["if-allergies","in",[!0]]]},null,8,["label"]),t(_,{name:"if-medical-histories",view:"blocks",items:[{value:!0,label:e.$t("new.step2.confirm-medical-histories")},{value:!1,label:e.$t("new.step2.deny-medical-histories")}],label:e.$t("new.step2.if-medical-histories"),rules:["required"],submit:!1},null,8,["items","label"]),t(y,{name:"medical-histories",label:e.$t("new.step2.medical-histories"),rows:3,rules:["required"],conditions:[["if-medical-histories","in",[!0]]]},null,8,["label"]),t(m,{name:"divider_2",tag:"hr",top:"1",bottom:"1"}),t(M,{name:"symptom-keywords","close-on-select":!1,search:!0,items:[{value:"fever",label:e.$t("new.step3.keywords.fever")},{value:"cough",label:e.$t("new.step3.keywords.cough")},{value:"sore throat",label:e.$t("new.step3.keywords.sore-throat")},{value:"headache",label:e.$t("new.step3.keywords.headache")},{value:"diarrhea",label:e.$t("new.step3.keywords.diarrhea")},{value:"constipation",label:e.$t("new.step3.keywords.constipation")},{value:"nausea",label:e.$t("new.step3.keywords.nausea")},{value:"shortness of breath",label:e.$t("new.step3.keywords.shortness-of-breath")},{value:"joint pain",label:e.$t("new.step3.keywords.joint-pain")},{value:"neck or back pain",label:e.$t("new.step3.keywords.neck-or-back-pain")},{value:"swelling",label:e.$t("new.step3.keywords.swelling")},{value:"stiffness",label:e.$t("new.step3.keywords.stiffness")},{value:"muscle weakness",label:e.$t("new.step3.keywords.muscle-weakness")},{value:"numbness",label:e.$t("new.step3.keywords.numbness")}],label:e.$t("new.step3.symptoms"),"input-type":"search",autocomplete:"off",strict:!1,truncate:!1},null,8,["items","label"]),t(y,{name:"symptom-text",label:e.$t("new.step3.symptom-text"),rules:["required","max:300"],rows:5,placeholder:e.$t("new.step3.symptom-placeholder"),floating:!1},null,8,["label","placeholder"]),t(j,{name:"duration",label:e.$t("new.step3.duration"),min:0,max:30,default:3,"tooltip-position":"bottom",info:e.$t("new.step3.duration-info")},null,8,["label","info"]),t(m,{name:"divider_1",tag:"hr",top:"2",bottom:"1"})]),_:1}),t(I)]),_:1},512)],64)}}},x=q(Z,[["__scopeId","data-v-c2eb5a86"]]),ee={class:"form-wrapper"},te={class:"button-group"},ne={__name:"new",setup(T){const{clearFormData:l,isSessionExpired:c,getLang:b,setLang:f}=V(),w=A("$vueform"),{setLocale:v}=G(),o=D();return H(()=>{c()||o.push("/chat")}),(i,p)=>{const h=J,g=O,e=x;return F(),E("div",ee,[s("div",te,[t(h,{size:"md",color:"red",variant:"outline",onClick:p[0]||(p[0]=()=>{a(l)(),a(o).push("/")})},{default:d(()=>[u(K(i.$t("new.back")),1)]),_:1}),t(g,{class:"select",name:"language",options:[{name:"chinese",value:"zh",display:"中文"},{name:"english",value:"en",display:"Eng"}],initValue:a(b)(),onChange:r=>{a(f)(r),a(w).i18n.locale=r,a(v)(r)}},null,8,["initValue","onChange"])]),t(e)])}}},oe=q(ne,[["__scopeId","data-v-b7e03b61"]]);export{oe as default};
